<Application x:Class="Wysg.Musm.Radium.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:Wysg.Musm.Radium.Converters">
    <!--
        App.xaml (Radium)
        Purpose:
          Central WPF resource bootstrapper for the desktop client. Merges a dark theme dictionary and
          exposes globally used converters / styles.

        Key Elements:
          ResourceDictionary.MergedDictionaries
            * DarkTheme.xaml: holds brushes, default control styles, high contrast tweaks. Loaded once here so all
              windows (Splash, Main, Settings, Spy) share a consistent palette without re-merging per window.

          CountToVisibilityConverter (Minimum=2)
            * Used in UI (e.g., list headers / previous studies strip) to collapse elements unless a minimum item
              threshold is reached. Placed at application scope to avoid multiple allocations and enable simple
              StaticResource usage inside DataTemplates.

        Guidance for future additions:
          * Prefer adding new global brushes or converters here instead of per-window duplicates.
          * Keep theme-specific resources grouped inside DarkTheme.xaml to allow future LightTheme.xaml swap by
            simply changing the merged source.
          * Avoid placing large data objects here (stick to lightweight resource instances) to keep startup fast.
    -->
    <Application.Resources>
        <ResourceDictionary>
            
            <!-- Reusable visibility converter (shared) -->
            <conv:CountToVisibilityConverter x:Key="CountToVisibilityConverter" Minimum="2"/>

            <ResourceDictionary.MergedDictionaries>
                <!-- Global dark theme palette and control styles -->
                <ResourceDictionary Source="/Wysg.Musm.Radium;component/Themes/DarkTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application>
