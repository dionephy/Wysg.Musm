<Window x:Class="Wysg.Musm.Radium.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:editor="clr-namespace:Wysg.Musm.Editor.Controls;assembly=Wysg.Musm.Editor"
        mc:Ignorable="d"
        Title="Radium - Medical Editor"
        Height="850" Width="1400"
        WindowStartupLocation="CenterScreen"
        Background="#111"
        FontFamily="Consolas"
        Foreground="#d0d0d0">

    <Window.Resources>
        <!-- Accent brushes -->
        <Color x:Key="AccentColor">#3D7BFD</Color>
        <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="PanelBrush" Color="#1E1E1E"/>
        <SolidColorBrush x:Key="PanelAltBrush" Color="#252526"/>
        <SolidColorBrush x:Key="BorderBrushDark" Color="#2D2D30"/>
        <SolidColorBrush x:Key="GlyphBrush" Color="#808080"/>

        <!-- Base style for embedded AvalonEdit via MusmEditor inside EditorControl -->
        <Style TargetType="editor:MusmEditor">
            <Setter Property="Background" Value="#1E1E1E"/>
            <Setter Property="Foreground" Value="#DCDCDC"/>
            <Setter Property="BorderBrush" Value="#2D2D30"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="ShowLineNumbers" Value="True"/>
            <Setter Property="Padding" Value="4"/>
        </Style>

        <!-- Style for our wrapper EditorControl -->
        <Style TargetType="editor:EditorControl">
            <Setter Property="MinHeight" Value="120"/>
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Background" Value="#1E1E1E"/>
        </Style>

        <Style TargetType="GridSplitter">
            <Setter Property="Background" Value="#2D2D30"/>
            <Setter Property="ShowsPreview" Value="False"/>
        </Style>

        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="#C8C8C8"/>
            <Setter Property="Margin" Value="4,2,8,2"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Background" Value="#2D2D30"/>
            <Setter Property="Foreground" Value="#C8C8C8"/>
            <Setter Property="BorderBrush" Value="#3D3D40"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="4,2,0,2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="2">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#232326"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#3D7BFD"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="#808080"/>
                                <Setter TargetName="border" Property="Background" Value="#222"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="#808080"/>
        </Style>
        <Style TargetType="ListBox">
            <Setter Property="Background" Value="#1E1E1E"/>
            <Setter Property="BorderBrush" Value="#2D2D30"/>
            <Setter Property="Foreground" Value="#D0D0D0"/>
        </Style>

        <Style x:Key="DarkToggleButtonStyle" TargetType="ToggleButton">
            <Setter Property="Background" Value="#2D2D30"/>
            <Setter Property="Foreground" Value="#C8C8C8"/>
            <Setter Property="BorderBrush" Value="#3D3D40"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="8,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="2">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#3D3D40"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#5A9FD6"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#3D7BFD"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="#808080"/>
                                <Setter TargetName="border" Property="Background" Value="#222"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="colFirst" Width="Auto" />
            <ColumnDefinition x:Name="colSecond" Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Top bar -->
        <DockPanel Grid.Row="0" Grid.ColumnSpan="2" LastChildFill="False" Background="#1E1E1E" Margin="0,0,0,2">
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" Margin="6,4,6,4">
                <Button Content="Force Ghost" Click="OnForceGhost"/>
                <Button Content="Settings" Click="OnOpenSettings"/>
                <ToggleButton x:Name="tglAlignRight" Content="Align Right" Style="{StaticResource DarkToggleButtonStyle}" Margin="8,0,0,0" Checked="OnAlignRightToggled" Unchecked="OnAlignRightToggled"/>
                <ToggleButton x:Name="chkReverseReports" Content="Reverse Reports" Style="{StaticResource DarkToggleButtonStyle}" Margin="8,0,0,0" Checked="OnReverseReportsChecked" Unchecked="OnReverseReportsChecked"/>
            </StackPanel>
            <TextBlock Text="Ready" VerticalAlignment="Center" Margin="4"/>
        </DockPanel>

        <!-- Central editing area -->
        <Grid Grid.Row="1" Grid.Column="1" Name="gridCenter" Background="#181818" Margin="0" HorizontalAlignment="Center" VerticalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="4"/>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Left: Current report -->
            <Grid Grid.Column="0" Margin="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" MinHeight="22"/>
                    <RowDefinition Height="4"/>
                    <RowDefinition Height="Auto" MinHeight="24"/>
                    <RowDefinition Height="4"/>
                    <RowDefinition Height="*" MinHeight="160"/>
                    <RowDefinition Height="4"/>
                    <RowDefinition Height="*" MinHeight="160"/>
                </Grid.RowDefinitions>

                <DockPanel Grid.Row="0" LastChildFill="False">
                    <TextBlock Padding="2,0,0,0" Text="Current Report" Foreground="#5A9FD6"/>
                    <ToggleButton x:Name="btnStudyLocked"
                                  Content="Study locked"
                                  Margin="8,0,0,0"
                                  VerticalAlignment="Center"
                                  Style="{StaticResource DarkToggleButtonStyle}"/>
                </DockPanel>
                <GridSplitter Grid.Row="1" HorizontalAlignment="Stretch" Height="4"/>
                <editor:EditorControl x:Name="EditorHeader" Grid.Row="2" MinHeight="70"/>
                <GridSplitter Grid.Row="3" HorizontalAlignment="Stretch" Height="4"/>
                <editor:EditorControl x:Name="EditorFindings" Grid.Row="4" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto"/>
                <GridSplitter Grid.Row="5" HorizontalAlignment="Stretch" Height="4"/>
                <editor:EditorControl x:Name="EditorConclusion" Grid.Row="6" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto"/>
            </Grid>

            <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" Width="4" Background="#2D2D30"/>

            <!-- Right: Previous + suggestion -->
            <Grid Grid.Column="2" Margin="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" MinHeight="22"/>
                    <RowDefinition Height="4"/>
                    <RowDefinition Height="Auto" MinHeight="24"/>
                    <RowDefinition Height="4"/>
                    <RowDefinition Height="*" MinHeight="160"/>
                    <RowDefinition Height="4"/>
                    <RowDefinition Height="*" MinHeight="160"/>
                </Grid.RowDefinitions>

                <DockPanel Grid.Row="0" LastChildFill="False" Margin="0,2,0,2">
                    <TextBlock Text="Study Filter (reserved)" Foreground="#5A9FD6"/>
                    <Button Content="+" Width="28" Margin="8,0,0,0"/>
                </DockPanel>
                <GridSplitter Grid.Row="1" HorizontalAlignment="Stretch" Height="4"/>
                <editor:EditorControl x:Name="EditorPreviousHeader" Grid.Row="2" MinHeight="70" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto"/>
                <GridSplitter Grid.Row="3" HorizontalAlignment="Stretch" Height="4"/>
                <editor:EditorControl x:Name="EditorPreviousFindings" Grid.Row="4" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto"/>
                <GridSplitter Grid.Row="5" HorizontalAlignment="Stretch" Height="4"/>
                <editor:EditorControl x:Name="EditorPreviousConclusion" Grid.Row="6" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto"/>
            </Grid>
        </Grid>

        
        
    </Grid>
</Window>